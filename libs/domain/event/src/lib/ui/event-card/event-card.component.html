<div class="event">
    <div class="event__cover cover">
        <div class="cover__date">
            <span
                class="tui-text_body-xs"
                [innerHTML]="event.date | eventDate"
            ></span>
        </div>
        <img class="cover__img" [lazySrc]="event.photos[0] || ''" />
    </div>
    <div class="event__info-wrapper">
        <div class="event__info">
            <span class="event__name tui-text_body-xl">
                {{ event.name }}
            </span>
            <div class="event__participants">
                <tui-avatar-stack [direction]="'left'">
                    @for (
                        participant of event.participants;
                        track participant.id
                    ) {
                        <tui-avatar
                            [round]="true"
                            [size]="'xs'"
                            [src]="participant.photos[0] || ''"
                        />
                    }
                </tui-avatar-stack>
                <span class="tui-text_body-s-2"> +10 Людей </span>
            </div>
            <div class="event__location tui-text_body-s text-secondary">
                <tui-icon
                    [icon]="'@tui.map-pin'"
                    [style.color]="'var(--tui-background-accent-1)'"
                />
                {{ event.geolocation }}
            </div>
        </div>
        <div class="event__buttons">
            <button tuiButton size="m" (click)="joinEvent($event)">Хочу</button>
            @if (event.requests_users?.length) {
                <button
                    tuiButton
                    appearance="outline"
                    size="m"
                    [moderateEvent]="{
                        dialogOptions: {
                            data: {
                                requests: event.requests_users || [],
                            },
                        },
                    }"
                >
                    @if (event.requests_users!.length > 10) {
                        10+ заявок
                    } @else {
                        {{ event.requests_users?.length }}
                        {{
                            event.requests_users?.length | i18nPlural: pluralMap
                        }}
                    }
                </button>
            }
        </div>
    </div>
</div>
